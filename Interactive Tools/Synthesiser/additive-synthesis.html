<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Harmonic Waveform Generator :: Electronic Measurements</title>
    <!-- <link rel="stylesheet" href="/Style Sheets/golfvormsynthese.css" /> -->
    <!-- <link rel="stylesheet" href="/Style Sheets/mooimaken4.css" /> -->
    <link rel="shortcut icon" href="/favicono.ico" />
    <meta http-equiv="imagetoolbar" content="no" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta
      name="description"
      content="Waveform generator with additive synthesis"
    />
    <meta name="author" content="Freddy Alferink" />
    <meta name="keywords" content="Waveform generator additive synthesis" />
   
    <meta name="robots" content="index,follow" />
    <!-- <script src="/Scripts/golfvormsynthese.js"></script> -->
    <!-- <script src="/Scripts/defaultscript4.js"></script> -->
  </head>
  <body>
    <a id="pagetop"></a>
    <div class="integraal">
      <article class="art_2">
        <h1>Additive synthese waveform generator</h1>
        <div class="artikeldatum">
          <i>Last Modification: January 23, 2013</i>
        </div>
        <p>
          Every randomly shaped waveform can be composed by adding one ore more
          sine waves signals with each a different frequency, phase and
          amplitude. This is also called additive synthesis. The frequency range
          consists of the fundamental and his harmonics.
        </p>
        <p>
          The wave shape in the tool beneath can be modified by adjusting the
          sliders H1 t/m H11. These will set the amplitudes of each harmonic.
          The phases of each harmonic can be set with the buttons below each
          slider.
        </p>

        <div id="grafiek_vak">
          <canvas id="art_rooster"
            >You got an old brouwser or javascript is disabled.</canvas
          >
          <canvas id="art_grafiek"></canvas>
        </div>
        <button type="button" onClick="set_harmonischen('sinus');">Sine</button>
        <button type="button" onClick="set_harmonischen('blok');">
          Square
        </button>
        <button type="button" onClick="set_harmonischen('trapezium');">
          Trapezium
        </button>
        <button type="button" onClick="set_harmonischen('driehoek');">
          Triangle
        </button>
        <button type="button" onClick="set_harmonischen('zaagtand');">
          Saw tooth
        </button>
        <button type="button" onClick="set_harmonischen('impuls');">
          Impuls
        </button>
        <button type="button" onClick="set_harmonischen('viool');">
          Violin
        </button>
        <div class="alleschuiven">
          <div class="schuifhouder" id="sh0">
            <div class="schuiftitel">A</div>
            <div class="schuifbalk">
              <div id="sknop0" class="schuifknop"></div>
            </div>
            <div class="waarde" id="sw0">0</div>
          </div>

          <div class="schuifhouder" id="sh1">
            <div class="schuiftitel">H1</div>
            <div class="schuifbalk">
              <div id="sknop1" class="schuifknop"></div>
            </div>
            <div class="waarde" id="sw1">0</div>
            <button type="button" onClick="set_sin(this,1);">sin</button>
            <button type="button" onClick="set_pol(this,1);">+</button>
          </div>

          <div class="schuifhouder" id="sh2">
            <div class="schuiftitel">H2</div>
            <div class="schuifbalk">
              <div id="sknop2" class="schuifknop"></div>
            </div>
            <div class="waarde" id="sw2">0</div>
            <button type="button" onClick="set_sin(this,2);">sin</button>
            <button type="button" onClick="set_pol(this,2);">+</button>
          </div>

          <div class="schuifhouder" id="sh3">
            <div class="schuiftitel">H3</div>
            <div class="schuifbalk">
              <div id="sknop3" class="schuifknop"></div>
            </div>
            <div class="waarde" id="sw3">0</div>
            <button type="button" onClick="set_sin(this,3);">sin</button>
            <button type="button" onClick="set_pol(this,3);">+</button>
          </div>

          <div class="schuifhouder" id="sh4">
            <div class="schuiftitel">H4</div>
            <div class="schuifbalk">
              <div id="sknop4" class="schuifknop"></div>
            </div>
            <div class="waarde" id="sw4">0</div>
            <button type="button" onClick="set_sin(this,4);">sin</button>
            <button type="button" onClick="set_pol(this,4);">+</button>
          </div>

          <div class="schuifhouder" id="sh5">
            <div class="schuiftitel">H5</div>
            <div class="schuifbalk">
              <div id="sknop5" class="schuifknop"></div>
            </div>
            <div class="waarde" id="sw5">0</div>
            <button type="button" onClick="set_sin(this,5);">sin</button>
            <button type="button" onClick="set_pol(this,5);">+</button>
          </div>

          <div class="schuifhouder" id="sh6">
            <div class="schuiftitel">H6</div>
            <div class="schuifbalk">
              <div id="sknop6" class="schuifknop"></div>
            </div>
            <div class="waarde" id="sw6">0</div>
            <button type="button" onClick="set_sin(this,6);">sin</button>
            <button type="button" onClick="set_pol(this,6);">+</button>
          </div>

          <div class="schuifhouder" id="sh7">
            <div class="schuiftitel">H7</div>
            <div class="schuifbalk">
              <div id="sknop7" class="schuifknop"></div>
            </div>
            <div class="waarde" id="sw7">0</div>
            <button type="button" onClick="set_sin(this,7);">sin</button>
            <button type="button" onClick="set_pol(this,7);">+</button>
          </div>

          <div class="schuifhouder" id="sh8">
            <div class="schuiftitel">H8</div>
            <div class="schuifbalk">
              <div id="sknop8" class="schuifknop"></div>
            </div>
            <div class="waarde" id="sw8">0</div>
            <button type="button" onClick="set_sin(this,8);">sin</button>
            <button type="button" onClick="set_pol(this,8);">+</button>
          </div>

          <div class="schuifhouder" id="sh9">
            <div class="schuiftitel">H9</div>
            <div class="schuifbalk">
              <div id="sknop9" class="schuifknop"></div>
            </div>
            <div class="waarde" id="sw9">0</div>
            <button type="button" onClick="set_sin(this,9);">sin</button>
            <button type="button" onClick="set_pol(this,9);">+</button>
          </div>

          <div class="schuifhouder" id="sh10">
            <div class="schuiftitel">H10</div>
            <div class="schuifbalk">
              <div id="sknop10" class="schuifknop"></div>
            </div>
            <div class="waarde" id="sw10">0</div>
            <button type="button" onClick="set_sin(this,10);">sin</button>
            <button type="button" onClick="set_pol(this,10);">+</button>
          </div>

          <div class="schuifhouder" id="sh11">
            <div class="schuiftitel">H11</div>
            <div class="schuifbalk">
              <div id="sknop11" class="schuifknop"></div>
            </div>
            <div class="waarde" id="sw11">0</div>
            <button type="button" onClick="set_sin(this,11);">sin</button>
            <button type="button" onClick="set_pol(this,11);">+</button>
          </div>
        </div>

        <div id="webapi">
          <h3>Sound</h3>
          <h4>Frequency (Hz)</h4>
          <button>&nbsp;-&nbsp;</button>
          <input type="text" class="waarde" id="freqval" value="0" />
          <button>&nbsp;+&nbsp;</button>
          <h4>Volume</h4>
          <button>&nbsp;-&nbsp;</button>
          <div id="amplval">
            <div id="amplvalnum">off</div>
            <div id="amplvalbar"></div>
          </div>
          <button>&nbsp;+&nbsp;</button>
        </div>

        
          
            <input id="taal" type="hidden" name="taal" value="en" />
           
  </body>
  <style>* {
    margin: 0px;
    padding: 0px;
    border-style: none;
    list-style-type: none;
  }
  body {
    font-family: verdana, helvetica, arial;
    font-size: 10pt;
    font-style: normal;
  }
  header,
  footer,
  nav,
  article,
  section,
  aside {
    display: block;
  }
  
  article {
    float: left;
    min-height: 500px;
    margin: 0px auto 0px auto;
    padding: 15px 25px 15px 25px;
    font-size: 1em;
    background-color: #fff;
  }
  
  p {
    font-size: 1em;
    margin: 3px 0px 12px 0px;
  }
  
  h1 {
    margin: 6pt 0pt 10pt 0pt;
    font-size: 1.7em;
    font-weight: bold;
    letter-spacing: 0.1em;
    color: #008;
    background-color: #fff;
  }
  h3 {
    margin: 7pt 0pt 3pt 0pt;
    font-size: 1.15em;
    font-weight: bold;
    color: #008;
    text-align: center;
  }
  h4 {
    font-size: 1em;
    margin: 10px auto 5px auto;
    font-weight: bold;
    font-style: italic;
    color: #008;
  }
  strong {
    font-size: 1em;
    font-weight: bold;
  }
  td {
    font-size: 10pt;
  }
  input,
  textarea,
  select,
  button {
    padding: 2px 5px;
    margin: 2px;
    font-family: verdana, helvetica, arial;
    font-size: 100%;
    border-radius: 5px;
  }
  input,
  textarea,
  select {
    border: 1px solid #99f;
  }
  button,
  input[type="submit"] {
    margin: 7px 0px;
    background-color: #ffe000;
    box-shadow: 3px 3px 3px #aaa;
    border: 1px solid #e0c000;
    cursor: pointer;
  }
  button:disabled {
    background-color: #ffe0aa;
    color: #888;
  }
  
  article a:link,
  article a:visited,
  a:hover,
  a:active {
    text-decoration: underline;
  }
  
  a:link {
    color: #00c;
  }
  a:visited {
    color: #009;
  }
  a:hover,
  a:active {
    color: #f00;
  }
  
  /*** Afbeeldingen en tabellen ***/
  
  .avak table {
    border-collapse: collapse;
    border-style: hidden;
  }
  .avak thead {
    font-weight: bold;
    background-color: #e0e0e0;
  }
  .avak tbody tr {
    border: 1px solid #ccc;
  }
  .avak td {
    font-size: 0.85em;
    padding: 2px 5px;
    border: 1px solid #ccc;
  }
  .avak caption,
  figcaption,
  .codecaption {
    padding: 2px 4px 3px 4px;
    text-align: left;
    font-size: 0.85em;
  }
  .avak {
    padding: 0px;
    border: 1px solid #999;
  }
  .atdn td {
    font-size: 10pt;
  }
  .alinks {
    float: left;
    margin: 5px 8px 5px 0px;
  }
  .arechts {
    float: right;
    margin: 5px 0px 5px 8px;
  }
  .abreed {
    clear: both;
    margin: 5px 0px 5px 0px;
  }
  .bg_wit {
    background-color: #fff;
  }
  .bg_geel {
    background-color: #ff0;
  }
  .bg_lgeel {
    background-color: #ff8;
  }
  .tkol_l {
    text-align: left;
  }
  .tkol_r {
    text-align: right;
    border: 1px solid #999;
  }
  .tkol_c {
    text-align: center;
    border: 1px solid #999;
  }
  .tkol_h {
    visibility: hidden;
  }
  
  .imgequ {
    padding: 5px;
    border: 1px solid #e0e0e0;
    vertical-align: middle;
    margin: 6px 20px 6px 20px;
  }
  .imgequt {
    margin: 0px;
  }
  .imgindex {
    width: 150px;
    height: 100px;
    padding: 0px;
    border: 1px solid #999;
    float: right;
    margin: 5px 0px 5px 8px;
  }
  
  /*** Artikel index paginas ***/
  
  .art_index {
    clear: both;
    width: 710px;
    float: left;
    margin: 5px 0px 5px 0px;
    padding: 7px 15px 7px 15px;
    color: #000;
    background-color: #f0f0f0;
  }
  .art_index:hover {
    text-decoration: none;
    background-color: #ddddff;
  }
  .art_index:hover h3 {
    text-decoration: underline;
    color: #f00;
  }
  
  @media screen and (max-width: 992px) {
    .art_1,
    .art_2,
    .art_3,
    .avak,
    .abreed,
    .art_index,
    .hmblok,
    .integraal,
    .art_index,
    .reactiebreedte,
    .rformline span,
    #reacties input[type="text"],
    #reacties textarea,
    .reactietekst,
    .reactiekop,
    .nav_vast,
    .nav_vast a,
    .imgi {
      position: static;
      float: none;
      width: auto;
      height: auto;
      margin-left: 0px;
      margin-right: 0px;
    }
    body {
      font-size: 15px;
    }
    article {
      padding: 15px;
    }
    figure,
    img {
      max-width: 100%;
      height: auto;
    }
    .hmblok figure,
    .hmblok #slideshow {
      float: left;
      margin: 0px 10px 10px 0px;
    }
    #inlogvak {
      top: 70px;
      left: 25px;
    }
    .avak,
    .abreed {
      max-width: 100%;
      overflow-x: auto;
    }
    .artinhoud,
    .gmenu,
    .footerlinks,
    .gas_onder {
      display: none;
    }
    .mobilemenu {
      display: block;
    }
    .mobilemenu {
      display: block;
      width: 45px;
      height: 45px;
      margin: 4px auto;
      cursor: pointer;
    }
    .gmenu,
    .tmenu,
    .gmenu ul {
      position: static;
      float: left;
      clear: both;
      width: auto;
      z-index: 90;
    }
    .gmenu ul {
      height: 0px;
    }
    #menudropdown a {
      line-height: 2em;
    }
    #menudropdown:hover .gmenu {
      display: block;
      height: auto;
    }
    .gmenu ul {
      height: auto;
      visibility: visible;
      opacity: 1;
      box-shadow: none;
    }
    .gmenu:hover ul {
      height: auto;
    }
    .gmenu,
    .tmenu {
      background-color: #228;
      border: solid 1px #228;
      color: #fff;
    }
    .gmenu {
      margin-bottom: 5px;
    }
  }

  #grafiek_vak {
  position: relative;
  float: left;
  width: 475px;
  height: 225px;
  margin: 5px 10px 5px 0px;
  padding: 3px;
  border: 1px solid #888;
}
#art_rooster,
#art_grafiek {
  position: absolute;
  top: 0px;
  left: 0px;
}

.alleschuiven {
  float: left;
  clear: both;
}
.schuifhouder {
  float: left;
  width: 45px;
  background-color: #eee;
  border: 1px solid #ddd;
}
.schuifhouder:first-child {
  background-color: #dea;
}
.schuifhouder button {
  width: 34px;
  text-align: center;
  margin: 2px 5px;
}
.waarde {
  float: left;
  width: 34px;
  margin: 5px 2px;
  padding: 2px 2px 2px 4px;
  background-color: #fff;
  box-shadow: inset 1px 1px 2px #aaa;
  font-size: 0.85em;
}
.schuifbalk {
  float: left;
  width: 5px;
  height: 198px;
  margin: 5px 20px;
  background-color: #000;
  border: 1px solid #fff;
}
.schuifknop {
  position: relative;
  top: 75px;
  left: -7px;
  width: 17px;
  height: 3px;
  border-width: 5px 1px;
  border-color: #88a;
  border-style: solid;
  background-color: #fff;
  box-shadow: 2px 2px 2px #888;
}
.schuiftitel {
  width: 45px;
  float: left;
  clear: both;
  margin: 5px 0px;
  text-align: center;
}
#webapi {
  float: left;
  margin-left: 10px;
  padding: 8px;
  width: 140px;
  height: auto;
  border: 3px solid #888;
  border-radius: 7px;
  box-shadow: 3px 3px 3px #aaa;
}
#webapi button {
  float: left;
  margin: 2px 5px;
}
#webapi h4 {
  clear: both;
  display: block;
}
#amplval {
  float: left;
  position: relative;
  width: 40px;
  height: 17px;
  margin: 5px 2px;
  background-color: #fff;
  box-shadow: inset 1px 1px 2px #aaa;
  font-size: 0.85em;
}
#amplvalbar,
#amplvalnum {
  position: absolute;
  top: 0px;
  left: 0px;
  height: 17px;
}
#amplvalbar {
  width: 0px;
  background-color: #44c;
  opacity: 0.3;
}
#amplvalnum {
  padding: 2px 0px 0px 10px;
}

/* My Version */
.graphandfaders {
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
}

.waveSelectContainer {
  position: relative;
  height: 180px;
  left: 20px;
}

  </style>

  <script>var taal;
    var cnr; // canvas raster
    var cng; // canvas grafiek
    var xras = 300; // grafiek grootte x
    var yras = 200; // grafiek grootte y
    var dxras = 35; // raster afstand
    var dyras = 20;
    var ml = 45;	// margin links
    var mr = 10;	// margin rechts
    var mt = 10;	// margin boven
    var mb = 20;	// margin onder
    
    // Schaal x,y assen
    var minx = 0;
    var stepx = 30;
    var maxx = 480;
    var miny = -1.2;
    var stepy = 0.2;
    var maxy = 1.2;
    
    var harm_arr = new Array();	// harmonischen array
    var hars_arr = new Array();	// Fase array
    var hal = 0;						// harmonischen array lengte
          
    var isdrag;			// muisslepen actief (of niet)
    var dobj;			// object waarop geklikt is
    var gobj;			// grandparent object waarop geklikt is
    
    
    /*** Artikel onload aangeroepen vanuit "xmlactie" ***/
    function art_init() {
      taal = (document.getElementById('taal').value == 'en')? 'en':'nl';
      isdrag = false;
      var canvasr = document.getElementById('art_rooster');
      if (canvasr.getContext) {
        cnr = canvasr.getContext("2d");
      }
      var canvasg = document.getElementById('art_grafiek');
      if (canvasg.getContext) {
        cng = canvasg.getContext("2d");
      }
      init_grafiek();
      grafiek_raster();
      var i = 0;
      while (document.getElementById('sknop'+i)) {
        var obj = document.getElementById('sknop'+i);
        (browser == 'IE')? obj.attachEvent('onmousedown', schuifknopin) : obj.addEventListener('mousedown', schuifknopin, false);
        obj.addEventListener('touchstart', schuifknopin, false);
        i++;
      }
      
      var obj = document.getElementById('webapi').getElementsByTagName('button');
      if (obj.length > 0) {
        obj[0].addEventListener('click', function(e) {freqSound(e,0);}, false);
        obj[0].addEventListener('touchstart', function(e) {freqSound(e,0);}, false);
        obj[1].addEventListener('click', function(e) {freqSound(e,1);}, false);
        obj[1].addEventListener('touchstart', function(e) {freqSound(e,1);}, false);
        obj[2].addEventListener('click', function(e) {amplSound(e,0);}, false);
        obj[2].addEventListener('touchstart', function(e) {amplSound(e,0);}, false);
        obj[3].addEventListener('click', function(e) {amplSound(e,1);}, false);
        obj[3].addEventListener('touchstart', function(e) {amplSound(e,1);}, false);
        document.getElementById('freqval').addEventListener('change', freqInput, false);
      }
      
      document.getElementById('freqval').value = 440.0;
      set_harmonischen('sinus');
    }
    
    
    /*** Set sin/cos ***/
    function set_sin(dit,ha) {
      if (dit.innerHTML == 'sin') {
        dit.innerHTML = 'cos';
        hars_arr[ha] += Math.PI/2;
      }
      else {
        dit.innerHTML = 'sin';
        hars_arr[ha] -= Math.PI/2;
      }
      grafiek_signaal();
      updateSoundWave();
    }
    
    /*** Set pos/neg ***/
    function set_pol(dit,ha) {
      if (dit.innerHTML == '+') {
        dit.innerHTML = '-';
        hars_arr[ha] += Math.PI;
      }
      else {
        dit.innerHTML = '+';
        hars_arr[ha] -= Math.PI;
      }
      grafiek_signaal();
      updateSoundWave();
    }
    
    /*** Positioneer schuiven en vul waardes vanuit array ***/
    function set_schuifveld() {
      var i = 0;
      while (document.getElementById('sknop'+i)) {
        var ks = (i==0) ? 0.5 : 1;
        var obj = document.getElementById('sknop'+i);
        var spos = obj.parentNode.offsetHeight - harm_arr[i] * obj.parentNode.offsetHeight*ks;
        obj.style.top = spos-7+'px';
        document.getElementById('sw'+i).innerHTML = harm_arr[i].toFixed(3);
        if (i > 0) {
          var spb = document.getElementById('sh'+i).getElementsByTagName('button');
          var tmp = hars_arr[i];
          if (tmp > Math.PI*0.9) {
            tmp -= Math.PI; spb[1].innerHTML = '-';}
          else {
            spb[1].innerHTML = '+';}
          if (tmp > Math.PI*0.45) {
            spb[0].innerHTML = 'cos';}
          else {
            spb[0].innerHTML = 'sin';}
        }
        i++;
      }
    }
    
    
    /*** Op een schuifknop geklikt ***/
    function schuifknopin(e) {
      e.preventDefault();
      var fobj = (browser == 'ok')? e.target : event.srcElement;
      if (fobj.className == 'schuifknop') {
        isdrag = true;
        dobj = fobj;
        gobj = dobj.parentNode.parentNode;
        (browser == 'IE')? gobj.attachEvent('onmouseup', schuifknoplos) : gobj.addEventListener('mouseup', schuifknoplos, false);
        gobj.addEventListener('touchend', schuifknoplos, false);
        (browser == 'IE')? gobj.attachEvent('onmouseleave', schuifknoplos) : gobj.addEventListener('mouseleave', schuifknoplos, false);
        gobj.addEventListener('touchleave', schuifknoplos, false);
        (browser == 'IE')? gobj.attachEvent('onmousemove', schuifknopslepen) : gobj.addEventListener('mousemove', schuifknopslepen, false);
        gobj.addEventListener('touchmove', schuifknopslepen, false);
        dobj.style.borderColor = '#F00';
      }
    }
    
    
    /*** Linker muisknop losgelaten of out ***/
    function schuifknoplos(e) {
      if (gobj.className == 'schuifhouder') {
        isdrag = false;
        (browser == 'IE')? gobj.detachEvent('onmouseup', schuifknoplos) : gobj.removeEventListener('mouseup', schuifknoplos, false);
        gobj.removeEventListener('touchend', schuifknoplos, false);
        (browser == 'IE')? gobj.detachEvent('onmouseleave', schuifknoplos) : gobj.removeEventListener('mouseleave', schuifknoplos, false);
        gobj.removeEventListener('touchleave', schuifknoplos, false);
        (browser == 'IE')? gobj.detachEvent('onmousemove', schuifknopslepen) : gobj.removeEventListener('mousemove', schuifknopslepen, false);
        gobj.removeEventListener('touchmove', schuifknopslepen, false);
        dobj.style.borderColor = '#88A';
      }
    }
    
    /*** Slepen met de schuifknop ***/
    function schuifknopslepen(e) {
      if (isdrag) {
        e.preventDefault();
        var ysl = (browser == 'ok')? e.pageY : event.pageY;
        var schuifbalk = dobj.parentNode;
        var yval = ysl - schuifbalk.offsetTop;
        if (yval < 0) {yval = 0;}
        if (yval > schuifbalk.offsetHeight) {yval = schuifbalk.offsetHeight;}
        dobj.style.top = yval-7+'px';
        var pros = (schuifbalk.offsetHeight - yval) / schuifbalk.offsetHeight;
        var i = parseInt(dobj.id.replace(/[^0-9]/g,''));
        var pros = (i==0) ? pros*2 : pros*1;
        pros = pros.toFixed(3);
        harm_arr[i] = pros;
        document.getElementById('sw'+i).innerHTML = pros;
        grafiek_signaal();
        updateSoundWave();
      }
    }
    
    
    /*** Schrijf signaal in grafiek ***/
    function grafiek_signaal() {
      cng.clearRect(0, 0, xras+ml+mr, yras+mt+mb);
      cng.beginPath();
      cng.strokeStyle = '#00F';
      var ys = harm_arr[0]*yras/(maxy-miny);
      var yo = yras/2;
      var xs = (maxx-minx)*2*Math.PI/(xras*360);
      var xo = 0;
      var yval;
      var mulx;
      for (var i=0; i<=xras; i++) {
        yval = 0;
        mulx = i*xs;
        for (var ha=1; ha<hal; ha++) {
          yval += harm_arr[ha]*Math.sin((ha*mulx)+hars_arr[ha]);
        }
        yval = yo - yval*ys;
        
        if (i == 0) {
          cng.moveTo(i+ml, yval+mt);}
        else {
          cng.lineTo(i+ml, yval+mt);}
      }
      cng.stroke();
    }
    
    
    /*** Keuze standaard signalen ***/
    function set_harmonischen(signaal) {
      var pi = Math.PI;
      switch(signaal) {
        case 'sinus' :
          harm_arr = new Array(1,1,0,0,0,0,0,0,0,0,0,0);
          hars_arr = new Array(0,0,0,0,0,0,0,0,0,0,0,0);
          break;
        case 'blok' :
          harm_arr = new Array(4/pi,1,0,0.3333,0,0.2,0,0.1429,0,0.1111,0,0.0909);
          hars_arr = new Array(0,0,0,0,0,0,0,0,0,0,0,0);
          break;
        case 'trapezium' :
          harm_arr = new Array(4/pi,0.993,0,0.314,0,0.168,0,0.101,0,0.06,0,0.033);
          hars_arr = new Array(0,0,0,0,0,0,0,0,0,0,0,0);
          break;
        case 'driehoek' :
          harm_arr = new Array(0.81,1,0,0.11111,0,0.04,0,0.02041,0,0.0123,0,0.0083);
          hars_arr = new Array(0,pi/2,0,pi/2,0,pi/2,0,pi/2,0,pi/2,0,pi/2);
          break;
        case 'zaagtand' :
          harm_arr = new Array(2/pi,1,0.5,0.333,0.25,0.2,0.1667,0.1429,0.125,0.1111,0.1,0.0909);
          hars_arr = new Array(0,0,0,0,0,0,0,0,0,0,0,0);
          break;
        case 'impuls' :
          harm_arr = new Array(0.18,1,0.9,0.8,0.7,0.6,0.5,0.4,0.3,0.2,0.1,0);
          hars_arr = new Array(0,0,pi*1.5,pi,pi/2,0,pi*1.5,pi,pi/2,0,pi*1.5,pi);
          break;
        case 'viool' :
          harm_arr = new Array(0.49,0.995,0.94,0.425,0.480,0,0.365,0.04,0.085,0,0.09,0);
          hars_arr = new Array(0,0,pi/2,0,pi/2,0,pi/2,0,pi/2,0,pi/2,0);
          break;
      }
      hal = harm_arr.length;
      set_schuifveld();
      grafiek_signaal();
      updateSoundWave();
    }
    
    
    /*** Initialiseer grafiek ***/
    function init_grafiek() {
      xras = dxras*(maxx-minx)/stepx;
      yras = dyras*(maxy-miny)/stepy;
      var xveld = xras+ml+mr;
      var yveld = yras+mt+mb;
      cnr.canvas.width = xveld;
      cnr.canvas.height = yveld;
      cng.canvas.width = xveld;
      cng.canvas.height = yveld;
      cnr.clearRect(0, 0, xveld, yveld);
      var obj = document.getElementById('grafiek_vak');
      obj.style.width = xveld+'px';
      obj.style.height = yveld + 'px';
    }
    
    /*** Maak grafiek raster ***/
    function grafiek_raster() {
      cnr.strokeStyle = '#888';
      cnr.lineWidth = 1;
      cnr.font = '8pt verdana';
      cnr.textBaseline = 'middle';
      var lab;
      // Horizontale raster lijnen
      cnr.textAlign = 'right';
      var lw = maxy;
      var dy = yras/10;
      for (var yi=0; yi<=yras; yi+=dyras) {
        cnr.beginPath();
        cnr.moveTo(0+ml-5, yi+mt);
        cnr.lineTo(xras+ml, yi+mt);
        cnr.stroke();
        lab = grafiek_label(lw, 3);
        cnr.fillText(lab, ml-8, mt+yi);
        lw -= stepy;
      }
      // Verticale raster lijnen
      cnr.textAlign = 'center';
      var lw = minx;
      for (var xi=0; xi<=xras; xi+=dxras) {
        cnr.beginPath();
        cnr.moveTo(xi+ml, 0+mt);
        cnr.lineTo(xi+ml, yras+mt+5);
        cnr.stroke();
        lab = grafiek_label(lw, 3);
        cnr.fillText(lab, ml+xi, mt+yras+12);
        lw += stepx;
      }
      // Grijs vlak
      var gsx = xras / (maxx - minx) * (360 - minx);
      cnr.fillStyle = 'rgba(0,0,0,0.1)';
      cnr.fillRect(gsx+ml,mt,xras-gsx,yras);
    }
    
    
    /*** Maak technische notatie labels ***/
    function grafiek_label(waarde, deci) {
      var prefix = new Array('a','f','p','n','µ','m','','k','M','G','T','P','E');
      var pp = 6;
      var sgn = '';
      if (waarde > -1e-15 && waarde < 1e-15) {
        waarde = 0;
      }
      else {
        if (waarde < 0) {
          sgn = '-';
          waarde = Math.abs(waarde);
        }
        while (waarde >= 1000 && prefix[pp+1]) {
          waarde /= 1000;
          pp++;
        }
        while (waarde < 1 && prefix[pp-1]) {
          waarde *= 1000;
          pp--;
        }
        var sh = 0;
        if (waarde >= 100) {
          waarde /= 100;
          sh = 2;
        }
        else if (waarde >= 10) {
          waarde /= 10;
          sh = 1;
        }
        waarde = Math.round(Math.pow(10,deci)*waarde);
        waarde /= Math.pow(10,deci-sh);
      }
      return sgn+waarde+prefix[pp];
    }
    
    /*** Web Audio API ***/
    
    var audioCtx = false;
    var oscillator;
    var volume;
    var note = 0;
    var ampl = 0;
    var freq = 440.0;
    var playing = false;
    
    
    function calcFreq() {
      return Math.pow(2, note / 12)*440;
    }
    
    function setupSound() {
      if (audioCtx !== false) return;
      audioCtx = new AudioContext();
      oscillator = audioCtx.createOscillator();
      oscillator.frequency.value = calcFreq();
      //volume = audioCtx.createGainNode(); // oud
      volume = audioCtx.createGain(); // nieuw
      volume.gain.value = ampl;
      oscillator.connect(volume);
      volume.connect(audioCtx.destination);
      document.getElementById('freqval').value = calcFreq();
      playing = true;
      oscillator.start(0);
      //oscillator.noteOn(0);
    }
    
    function freqInput(e) {
      if (audioCtx === false) setupSound();
      var obj = e.target;
      freq = obj.value;
      if (freq < 1) {
        freq = 1;}
      if (freq > 20000) {
        freq = 20000;}
      oscillator.frequency.value = freq;
      document.getElementById('freqval').value = freq;
      note = Math.round((Math.log(freq / 440)/Math.log(2)) * 12);
    }
    
    function freqSound(e,dir) {
      e.preventDefault();
      if (audioCtx === false) setupSound();
      if (dir == 0) {
        note--; }
      else {
        note++; }
      freq = calcFreq(note);
      oscillator.frequency.value = freq;
      document.getElementById('freqval').value = freq.toFixed(1);
    }
    
    function amplSound(e,dir) {
      e.preventDefault();
      if (audioCtx === false) setupSound();
      if (dir == 0) {
        ampl -= 0.1;
        if (ampl < 0) ampl = 0; 
      } else {
        ampl += 0.1;
        if (ampl > 1) ampl = 1;
      }
      ampl = Math.round(ampl * 10) / 10;
      volume.gain.value = ampl;
      var obj = document.getElementById('amplval');
      document.getElementById('amplvalbar').style.width = parseInt(obj.offsetWidth * ampl)+'px';
      var nobj = document.getElementById('amplvalnum');
      if (Math.round(ampl * 10) == 0) nobj.innerHTML = 'off';
      else nobj.innerHTML = ampl;
    }
    
    
    function updateSoundWave() {
      if (audioCtx !== false) {
        var pi = Math.PI;
        var nHarm = 11+1;
        var curveSin = new Float32Array(nHarm);
        var curveCos = new Float32Array(nHarm);
        curveSin[0] = 0;
        curveCos[0] = 0;
        for (var i = 1; i < nHarm; i++) {
          curveSin[i] = harm_arr[i] * harm_arr[0] * Math.cos(hars_arr[i]);
          curveCos[i] = harm_arr[i] * harm_arr[0] * Math.sin(hars_arr[i]);
        }
        var waveTable = audioCtx.createPeriodicWave(curveCos, curveSin);
        oscillator.setPeriodicWave(waveTable);
      }
    }
    </script>
    <script>// HTML5 dingen goedpraten voor IE
      document.createElement("article");
      document.createElement("footer");
      document.createElement("header");
      document.createElement("section");
      document.createElement("nav");
      document.createElement("figure");
      document.createElement("figcaption");
      
      var taal = 'en';
      var menuobj = false;
      var browser = 'ok';
      var re = new RegExp("MSIE ([0-9]{1,}[\.0-9]{0,})");
      var lastReactElm;
      var reactieStart;
      
      if (re.exec(navigator.userAgent) != null) {
        if (parseFloat(RegExp.$1) < 10) {
          browser = 'IE';}
      }
      (browser == 'ok')? window.addEventListener('load', laden_init, false):window.attachEvent('onload', laden_init);
      if (('ontouchstart' in window) || (navigator.maxTouchPoints > 0) || (navigator.msMaxTouchPoints > 0)) {
        browser = 'touch'; // Maar wat te doen met IE10 met muisbesturing?
      }
      
      /*** On page load ***/
      function laden_init() {
        // Javascript detected
        if (document.getElementById('js_script_uit')) {
          document.getElementById('js_script_uit').style.display = 'none';
        }
        // Taal
        taal = (document.getElementById('taal') && document.getElementById('taal').value == 'en')? 'en':'nl';
        // Init dropdown menu touch devices
        if (browser == 'touch') {
          var menudrop = document.getElementById('menudropdown').getElementsByClassName('hmenu');
          var nm = menudrop.length;
          for (var i=0; i<nm; i++) {
            menudrop[0].addEventListener('touchstart', menutouch, false);
            menudrop[0].className = 'htmenu';
          }
        }
        makeupCodeTags();
        // Als artikel initialisatie nodig is ...
        if (typeof art_init == 'function') {
          art_init();
        }
        // Reacties
        if (document.getElementById('reactieform')) {
          lastReactElm = document.getElementById('reactieform');
          reactieStart = 0;
          if (window.reactiesData) {
            try {
              plaatsReacties(JSON.parse(reactiesData));
            } catch(err) {
              document.getElementById('meerreactiesknop').innerHTML = (taal == 'nl')? 'Er ging iets verkeerd bij het ophalen van de reacties.':'Something went wrong when retrieving the comments.';
            }
            
          }
        }
      }
      
      /*** Dropdown menu touch devices ***/
      function menutouch(e) {
        if (browser == 'touch') {
          e.stopPropagation();
          var nobj = e.target;
          var memac = false;
          if (nobj.className == 'tmenu') {
            if (nobj != menuobj) {
              nobj.style.height = '17px';
              nobj.style.backgroundColor = '#EEF';
              nobj.style.borderColor = '#66A';
              var ulobj = nobj.parentNode.getElementsByTagName('ul')[0];
              ulobj.style.visibility = 'visible';
              ulobj.style.opacity = '1';
              ulobj.style.transitionDelay = '0s';
              memac = true;
            }
            if (menuobj !== false) {
              menuobj.style.height = '16px';
              menuobj.style.backgroundColor = '#DDF';
              menuobj.style.borderColor = '#DDF';
              var ulobj = menuobj.parentNode.getElementsByTagName('ul')[0];
              ulobj.style.visibility = 'hidden';
              ulobj.style.opacity = '0';
              //ulobj.style.transitionDelay = 'visibility 0s linear 0.3s, opacity 0.3s linear';
            }
            menuobj = (memac === false)? false : nobj;
          }
        }
      }
      
      /*** Maak een XMLHttpRequest Object ***/
      function GetXmlHttpObject() {
        var xmlHttp=null;
        try  // Firefox, Opera 8.0+, Safari
          {xmlHttp=new XMLHttpRequest();}
        catch (e) {
          try  // Internet Explorer
            {xmlHttp=new ActiveXObject("Msxml2.XMLHTTP");}
          catch (e)
            {xmlHttp=new ActiveXObject("Microsoft.XMLHTTP");}
         }
        return xmlHttp;
      }
      
      
      /*** Verzend (POST) data naar de server ***/ 
      function verzend_data(post_para) {
        xmlHttp=GetXmlHttpObject();
        if (xmlHttp==null) {
          alert ('Your browser is outdated and does not support HTTP Request'); return; } 
        xmlHttp.open("POST", '/incfs/ajax_actie.php', true);
        xmlHttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
        //xmlHttp.setRequestHeader("Content-length", post_para.length);
        //xmlHttp.setRequestHeader("Connection", "close");
        xmlHttp.onreadystatechange = ajax_melding;
        xmlHttp.send(post_para);
      }
      
      
      /*** terugmelding van de server ***/
      function ajax_melding() {
        if(xmlHttp.readyState == 4) {
          if(xmlHttp.status == 200) {
            var resultaat = xmlHttp.responseText;
            resultaat = unescape(resultaat);
            var resarr = resultaat.split('~#~');
            switch(resarr[0]) {
              case 'inlog_check':
                xml_inlog_check(resarr);
                break;
              case 'verwijder_reactie':
                xml_verwijder_reactie(resarr);
                break;
              case 'verwijder_bericht':
                xml_verwijder_bericht(resarr);
                break;
              default:
                alert('Oeps, daar ging wat fout, geen flauw idee wat.'+"\n"+resultaat);
            }
            //alert('Test : '+"\n"+resultaat);
          }
        }
      }
      
      
      /*** Vertaal tekst met html tags naar ubb-code ***/
      function code_html_ubb(transtxt) {
        var chtml = new Array();
          chtml[0] = /\<a\shref="([^"]+)("\starget="_blank"|")\>([^\<]+)\<\/a\>/gi;
          chtml[1] = /\<img(.+)src="(.+)\.(gif|jpg|png)"([^\>]+)>/gi;
          chtml[2] = /\<([\/]?)(h1|h2|h3|h4|h5)\>/gi;
          chtml[3] = /\<([\/]?)(b|i|u|s|sub|sup)\>/gi;
          chtml[4] = /(\<br([^\>]*)\>{2,})/gi;
          chtml[5] = /\<br([^\>]*)\>/gi;
        var cubb = new Array();
          cubb[0] = "[url=$1]$3[/url]";
          cubb[1] = "[img]$2.$3[/img]";
          cubb[2] = "[$1kop]";
          cubb[3] = "[$1$2]";
          cubb[4] = "\n\n";
          cubb[5] = "\n";
        for (var i=0; i<chtml.length; i++) {
          transtxt = transtxt.replace(chtml[i], cubb[i]);}
        return transtxt;
      }
      
      
      /*** Vertaal tekst met ubb-code naar html tags ***/
      function code_ubb_html(transtxt) {
        var cubb = new Array();
          cubb[0] = /\[url=(http(s?):\/\/?)([^\]]+)\]([^\[]+)\[\/url\]/gi;
          cubb[1] = /\[url=(http(s?):\/\/?)([^\]]+)\]\[\/url\]/gi;
          cubb[2] = /\[img\]([^\[]+)\[\/img\]/gi;
          cubb[3] = /\[([\/]?)(kop)\]/gi;
          cubb[4] = /\[([\/]?)(b|i|u|s|sub|sup)\]/gi;
          cubb[5] = /\n/gi;
        var chtml = new Array();
          chtml[0] = "<a href=\"$1$3\" target=\"_blank\">$4</a>";
          chtml[1] = "<a href=\"$1$3\" target=\"_blank\">$3</a>";
          chtml[2] = "<img class=\"userimg\" src=\"$1\" alt=\"\" onload=\"userimg_schalen(this);\">";
          chtml[3] = "<$1h2>";
          chtml[4] = "<$1$2>";
          chtml[5] = "<br>";
        for (var i=0; i<cubb.length; i++) {
          transtxt = transtxt.replace(cubb[i], chtml[i]);}
        return transtxt;
      }
      
      function addslashes(str) {
        str = str.replace(/\\/g, '\\\\');
        str = str.replace(/\'/g, '\\\'');
        str = str.replace(/\"/g, '\\"');
        str = str.replace(/\0/g, '\\0');
        return str;
      }
       
      function stripslashes(str) {
        str = str.replace(/\\'/g, '\'');
        str = str.replace(/\\"/g, '"');
        str = str.replace(/\\0/g, '\0');
        str = str.replace(/\\\\/g, '\\');
        return str;
      }
      
      function uitlegtekst(fobj, zichtbaar, tekst) {
        var ulvak = document.getElementById('uitleg_vak');
        ulvak.style.display = zichtbaar ? 'block' : 'none';
        ulvak.innerHTML = '<img class="uitlegpijl" src="/images/uitlegpijl.gif">'+tekst;
        var poff = vindPos(fobj);
        ulvak.style.left = poff[0]+fobj.offsetWidth+11+'px';
        ulvak.style.top = poff[1]-10+'px';
      }
      
      
      /*** Vind de absolute coördinaten van een element op de pagina ***/
      function vindPos(obj) {
        var links = 0;
        var boven = 0;
        if (obj.offsetParent) {
          do {
            links += obj.offsetLeft;
            boven += obj.offsetTop;
          } while (obj = obj.offsetParent);
        }
        return [links, boven];
      }
      
      /*** Inlog gegevens checken ***/
      function post_inlog_check() {
        var post_para = 'actie=inlog_check';
        post_para += '&taal='+encodeURIComponent(document.forms['inlog_form'].taal.value);
        post_para += '&inlog_naam='+encodeURIComponent(document.forms['inlog_form'].inlog_naam.value);
        post_para += '&inlog_ww='+encodeURIComponent(document.forms['inlog_form'].inlog_ww.value);
        verzend_data(post_para);
      }
      
      /*** Resultaat terug van inlog check ***/
      function xml_inlog_check(resarr) {
        document.getElementById('inlog_melding').style.display = 'block';
        if (resarr[1] != '') {
          document.getElementById('inlog_melding').innerHTML = resarr[1];}
        else {
          document.getElementById('inlog_melding').innerHTML = 'Inlog correct';
          document.forms['inlog_form'].submit();
        }
      }
      
      /*** Uitloggen ***/
      function uitlogklik() {
        document.forms['inlog_form'].uitlog.value = 'uitloggen'
        document.forms['inlog_form'].submit();
      }
      
      /*** Inlogvenster zichtbaar maken ***/
      function inlogklik() {
        document.getElementById('inlogvak').style.display = 'block';
        document.getElementById('inlog_melding').style.display = 'none';
        document.getElementById('inlog_melding').innerHTML = '';
        document.forms['inlog_form'].inlog_naam.focus();
      }
      
      /*** Inlogvenster sluiten ***/
      function inlog_popup_sluiten() {
        document.getElementById('inlogvak').style.display = 'none';
      }
      
      /*** Extern geladen plaatjes herschalen ***/
      function userimg_schalen(plaatje) {
        var paw = plaatje.parentNode.clientWidth - 24;
        if (plaatje.offsetWidth > paw) {
          plaatje.style.height = parseInt((plaatje.offsetHeight * paw) / plaatje.offsetWidth)+'px';
          plaatje.style.width = paw+'px';
        }
      }
      
      /*** Postknop in berichtform ***/
      function post_bericht() {
        document.getElementById('vervolg').value = document.getElementById('vervolgveld').value;
        document.getElementById('fototitel').value = window.frames['fotoframe'].document.getElementById('titel').value;
        document.berichtform.submit();
      }
      
      /*** Bericht verwijderen ***/
      function verwijder_bericht(bid) {
        var post_para = 'actie=verwijder_bericht';
        post_para += '&berichtid='+bid;
        verzend_data(post_para);
      }
      
      function xml_verwijder_bericht(resarr) {
        var melding = (resarr[2] == 'OK')? '<h2>Het bericht is verwijderd</h2>':'<h2>Het bericht kon niet verwijderd worden</h2>';
        document.getElementsByClassName('postvak')[0].innerHTML = melding;
      }
      
      /*** LATER ALGEMEEN MAKEN***/
      /*** POST JSON data naar de server ***/ 
      function verzendData(postPara) {
        if (window.XMLHttpRequest) {
          xmlHttp = new XMLHttpRequest();
          xmlHttp.open("POST", '/incfs/aja_reacties.php', true);
          xmlHttp.setRequestHeader('Content-type', 'application/json; charset=UTF-8');
          //xmlHttp.setRequestHeader("Content-length", postPara.length);
          //xmlHttp.setRequestHeader("Connection", "close");
          xmlHttp.responseType
          xmlHttp.onreadystatechange = function() {
            if (xmlHttp.readyState == 4 && xmlHttp.status == 200) {
              plaatsReacties(JSON.parse(xmlHttp.responseText));
            }
          }
          xmlHttp.send(JSON.stringify(postPara));
        }
      }
      
      
      /*** Plaats reacties met data van de server ***/
      function plaatsReacties(da) {
        var ntot = parseInt(da.header.ntot);
        var nres = parseInt(da.header.nres);
        var start = parseInt(da.header.start);
        if (ntot == 0) {
          var kobj = document.getElementById('meerreactiesknop');
          kobj.innerHTML = (taal == 'nl')? 'Er zijn nog geen reacties':'There are no comments yet';
          kobj.onclick = null;
        }
        else {
          var i = 0;
          var dobj, elm, ilm, tekst;
          while ('r'+i in da) {
            dobj = da['r'+i];
            // Reactie wrapper
            welm = document.createElement('div');
            welm.className = 'reactiewrapper';
            lastReactElm.parentNode.insertBefore(welm, lastReactElm);
            lastReactElm = welm;
            // Reactie kop
            tekst = ((taal == 'nl')? 'Op ':'At ')+dobj.datum+', '+dobj.tijd+((taal == 'nl')? ' schreef ':' wrote ');
            elm = document.createElement('h6');
            elm.className = 'reactiekop';
            elm.innerHTML = tekst;
            welm.appendChild(elm);
            // Auteur link
            ilm = document.createElement('a');
            tekst = ((taal == 'nl')? '/gebruiker/':'/user/')+dobj.urlnaam+'.html';
            ilm.setAttribute('href', tekst);
            ilm.innerHTML = dobj.naam;
            elm.appendChild(ilm);
            if (dobj.dr == 1) {
              ilm = document.createElement('span');
              ilm.className = 'banknop';
              ilm.title = (taal == 'nl')? 'Reactie verwijderen':'Remove Comment';
              ilm.value = dobj.rid;
              ilm.onclick = verwijder_reactie;
              ilm.innerHTML = 'X';
              elm.appendChild(ilm);
            }
            if (dobj.er == 1) {
              ilm = document.createElement('span');
              ilm.className = 'editknop';
              ilm.title = (taal == 'nl')? 'Reactie wijzigen':'Change comment';
              ilm.value = dobj.rid;
              ilm.onclick = edit_reactie;
              ilm.innerHTML = 'Edit';
              elm.appendChild(ilm);
            }
            // Reactie tekst
            elm = document.createElement('div');
            elm.className = 'reactietekst';
            elm.id = 'reactie'+dobj.rid;
            var rte = stripslashes(dobj.reactie);
            rte = rte.replace(/\<img[^\>]+\>/g, "<br>&lt;&lt; external images temporarily disabled &gt;&gt;<br>");
            elm.innerHTML = rte;
            welm.appendChild(elm);
            i++;
          }
          reactieStart = start + nres;
          if (reactieStart >= ntot) {
            document.getElementById('meerreactiesknop').style.display = 'none';
          }
          else {
            var ntxt = reactieStart+' van de '+ntot+' reacties geladen.<br>&downarrow;&downarrow; Klik hier om oudere reacties te laden &downarrow;&downarrow;';
            var etxt = reactieStart+' from '+ntot+' comments loaded.<br>&downarrow;&downarrow; Click here to load older comments &downarrow;&downarrow;';
            document.getElementById('meerreactiesknop').innerHTML = (taal == 'nl')? ntxt:etxt;
          }
        }
      }
      
      /*** Laden Reacties ***/
      function laadReacties() {
        document.getElementById('meerreactiesknop').innerHTML = (taal == 'nl')? 'Reacties worden geladen, een moment geduld ...':'Loading comments, please wait ...';
        var artid = document.getElementById('artikel_id').value;
        var artgroep = document.getElementById('artgroep').value;
        var postPara = {"gid":"2", "artid":artid, "artgroep":artgroep, "taal":taal, "start":reactieStart};
        verzendData(postPara);
      }
      
      /*** Knop: Reactie Edit ***/
      function edit_reactie(e) {
        var reactie_id = e.target.value;
        if (document.getElementById('reactie_edit_id').value != '') {
          var annuleer_id = document.getElementById('reactie_edit_id').value;
          edit_reactie_annuleren();
        }
        if (annuleer_id != reactie_id) {
          document.getElementById('reactie_edit_id').value = reactie_id;
          var reactie_tekst = document.getElementById('reactie'+reactie_id).innerHTML;
          document.getElementById('reactie_tekst_org').value = reactie_tekst;
          reactie_tekst = code_html_ubb(reactie_tekst);
          var tm1 = (taal == 'nl')? 'Wijzigingen opslaan':'Save modification';
          var tm2 = (taal == 'nl')? 'Wijzigen':'Modify';
          var tm3 = (taal == 'nl')? 'Annuleren':'Cancel';
          var tm4 = (taal == 'nl')? 'Wijzigingen niet opslaan':'Don\'t save modifications';
          document.getElementById('reactie'+reactie_id).innerHTML = '<textarea id="ReactieEditTekst" name="ReactieEditTekst" cols="65" rows="8" maxlength="2000">'+reactie_tekst+'</textarea>';
          document.getElementById('reactie'+reactie_id).innerHTML += '<br><button type="submit" name="ReactiePost" value="Wijzigen" title="'+tm1+'">'+tm2+'</button>&nbsp;&nbsp;<button type="button" value="Annuleren" title="'+tm4+'" OnClick="edit_reactie_annuleren();">'+tm3+'</button>';
          document.getElementById('reactie_post_blok').style.visibility = 'hidden';
        }
      }
      
      /*** Knop: Reactie Annuleren ***/
      function edit_reactie_annuleren() {
        var reactie_id = document.getElementById('reactie_edit_id').value;
        document.getElementById('reactie'+reactie_id).innerHTML = document.getElementById('reactie_tekst_org').value;
        document.getElementById('reactie_edit_id').value = '';
        document.getElementById('reactie_post_blok').style.visibility = 'visible';
      }
      
      /*** Knoppen: Reactie verwijderen ***/
      function verwijder_reactie(e) {
        var reactie_id = e.target.value;
        var post_para = 'actie=verwijder_reactie';
        post_para += '&reactieid='+reactie_id;
        verzend_data(post_para);
      }
      
      /*** Terugmelding Reactie Verwijderen ***/
      function xml_verwijder_reactie(resarr) {
        if (resarr[2] == 'VerwijderOK') {
          var mtxt = '*** OK :: Deze reactie is verwijderd. ***';}
        else {
          var mtxt = '*** FOUT :: Er is een fout opgetreden bij het verwijderen. ***';}
        document.getElementById('reactie'+resarr[1]).innerHTML = mtxt;
        document.getElementById('reactie'+resarr[1]).style.backgroundColor="#888";
        document.getElementById('reactie'+resarr[1]).style.color="#FFF";
      }
      
      /*** Mooimaken code tags (alleen Arduino)***/
      function makeupCodeTags() {
        var i = 0;
        var codeo = new Array();
          codeo[i++] = /^([^"]*)("[^"]*")(.*)$/g;
          codeo[i++] = /(\s)(loop|setup|Serial)/g;
          codeo[i++] = /(\s|\()(void|boolean|byte|int|long|unsigned|float|double)(\s)/g;
          codeo[i++] = /(\s|\()(if|else|for|switch|case|default|break)(\s+(\(|\{))/g;
          codeo[i++] = /(\s|\()(status|delay|false|true|sqrt)(\s|\))/g;
          codeo[i++] = /(\.)(begin|print|println|send)(\s*\()/g;
          codeo[i++] = /(\s|\()(delay|digitalWrite|digitalRead|bitSet|bitClear|bitWrite|bitRead|pinMode|analogReference|analogRead)(\s*\()/g;
          codeo[i++] = /(\s|\()(INPUT|OUTPUT|LOW|HIGH|INTERNAL|EXTERNAL|DEFAULT)/g;
          codeo[i++] = /(\/\/[^\n]*)/g;
          codeo[i++] = /(\/\*.*\*\/)/g;
          codeo[i++] = /\n\t\t/m;
          codeo[i++] = /\n\t\t/g;
        i = 0;
        var coder = new Array();
          coder[i++] = "$1<span class=\"code_blue\">$2</span>$3";
          coder[i++] = "$1<span class=\"code_ain\"><b>$2</b></span>";
          coder[i++] = "$1<span class=\"code_ain\">$2</span>$3";
          coder[i++] = "$1<span class=\"code_ain\">$2</span>$3";
          coder[i++] = "$1<span class=\"code_ain\">$2</span>$3";
          coder[i++] = "$1<span class=\"code_ain\">$2</span>$3";
          coder[i++] = "$1<span class=\"code_ain\">$2</span>$3";
          coder[i++] = "$1<span class=\"code_blue\">$2</span>";
          coder[i++] = "<span class=\"code_com\">$1</span>";
          coder[i++] = "<span class=\"code_com\">$1</span>";
          coder[i++] = "";
          coder[i++] = "<br>";
          
        elmList = document.getElementsByTagName('code');
        for (i=0; i<elmList.length; i++) {
          var codetxt = elmList[i].innerHTML;
          for (var j=0; j<codeo.length; j++) {
            codetxt = codetxt.replace(codeo[j], coder[j]);}
          elmList[i].innerHTML = codetxt;
        }
      }
      </script>
</html>
